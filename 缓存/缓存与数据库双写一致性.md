https://mp.weixin.qq.com/s/L_rAKlTCCDFvpUR8-eEGTA

# Cache Aside Pattern

最经典的缓存+数据库读写的模式。

读的时候 先读缓存，缓存没有再读数据库。

写的时候先写数据库，然后删除缓存。为什么是删除不是更新：（ lazy 计算的思想）缓存使用频率。原始数据频繁更新，但并不一定频繁被使用。缓存可能是多张表数据计算后的结果，相关的每张表数据更新都会引起缓存数据失效，可能一分钟修改100次，但是一分钟只使用了一次。  懒加载思想，如mybaits，关联表信息不会立即读库。

# 最初级的缓存不一致问题及解决方案

问题：先修改数据库，再删除缓存。如果删除缓存失败了，那么会导致数据库中是新数据，缓存中是旧数据，数据就出现了不一致。

解决思路：先删除缓存，再修改数据库。如果数据库修改失败了，那么数据库中是旧数据，缓存中是空的，那么数据不会不一致。因为读的时候缓存没有，则读数据库中旧数据，然后更新到缓存中。